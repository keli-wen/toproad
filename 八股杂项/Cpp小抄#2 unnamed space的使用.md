# [Cpp] Cpp小抄#2 无名命名空间的使用

[toc]

## 1. 无名命名空间的使用

### **1.1 无名命名空间的定义**

无名命名空间，又称为**未命名的命名空间**。是指关键字namespace后紧跟花括号括起来的一系列声明语句，不需要对命名空间取名。

### **1.2 生命周期**

无名命名空间中定义的变量拥有**同静态变量一样的生命周期**，在第一次使用前创建，直到程序结束才销毁。

### **1.3 作用域**

无名命名空间中定义的成员的作用域与该命名空间所在的作用域相同。比如，**如果在某个源文件中定义无名命名空间，则该无名命名空间只在该源文件能访问。** `无名命名空间可以替代全局作用域的static数据成员`

### **1.4 如何使用**

**无名命名空间的成员可以在所定义的文件中直接使用。**不需要使用命名空间的名字进行作用域限定，因为无名命名空间没有名字可以用来限定。

### **1.5 参考代码**

```cpp
#include <iostream>
namespace {
    int a = 10;
    int get(void) {
        return 20;
    }
}
 
 
int main(void){
    std::cout << "a: " << a << std::endl;
    std::cout << "get(): " << get() << std::endl;
    return 0;
}
```

### **1.6 使用无命名空间的优势**

使用无名命名空间可以替代文件中的**静态声明**。在文件中进行静态声明的做法已经被 C++ 标准取消，推荐的做法是使用无名命名空间。

将文件中的变量和函数声明为静态声明，可将其作用域限定为该文件范围有效，避免与其它文件的同名变量或函数冲突。在 C++ 引入无名命名空间后，在文件中使用无名命名空间来定义变量和函数，也能起到与静态声明一样的效果，而且不需要每个变量和函数单独加 static 进行声明。

### **1.7 注意事项**

其实有很多，实际上我们只要认为 Unnamed Space 就等价于写在文件全局作用域即可，所以我们应该避免重复命名造成的**二义性**。

## Reference

- Blog: [C++ 中无名命名空间的使用](https://www.cnblogs.com/zhaobinyouth/p/9476670.html)
- Blog: [C++ 无名命名空间](https://blog.csdn.net/bulebin/article/details/122764594)